nrowlan/distelli-playground:
  PreBuild:
    - echo faking prebuild

  Build:
    - echo faking build
 
  PreRelease:
    - echo faking prerelease

  AfterBuildSuccess:
    - echo fake build success

  PreStart:
    - case "$DISTELLI_ENV" in
    -     predeploy-stop-celery)
    -       echo prestart before stopping celery
    -     ;;
    - esac
  Start:
    - echo "ENVIRONMENT => ${DISTELLI_ENV}"
    - case "${DISTELLI_ENV}" in
    -     predeploy-stop-celery)
    -       echo pretending to stop old celery version
    -       rm -f /tmp/celery-started*
    -     ;;
    -     deploy-app)
    -       echo pretending to deploy new app version
    -       rm -f /tmp/django-running*
    -       touch /tmp/django-running-$DISTELLI_RELVERSION-$DISTELLI_BUILDNUM
    -     ;;
    -     postdeploy-start-celery)
    -       # start celery in end-deploy on celery host
    -       echo pretending to start new celery version
    -       touch /tmp/celery-started-$DISTELLI_RELVERSION-$DISTELLI_BUILDNUM
    -     ;;
    - esac
